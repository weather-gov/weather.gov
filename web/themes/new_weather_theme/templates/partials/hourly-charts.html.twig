{% set times = hours | map(h => h.hour) | json_encode %}
{% set temps = hours | map(h => h.temperature.degF) | json_encode %}
{% set feelsLike = hours | map(h => h.apparentTemperature.degF) | json_encode %}
{% set pops = hours | map(h => h.probabilityOfPrecipitation.percent) | json_encode %}
{% set dewpoints = hours | map(h => h.dewpoint.degF) | json_encode %}
{% set relativeHumidity = hours | map(h => h.relativeHumidity.percent) | json_encode %}
{% set windSpeeds = hours | map(h => h.windSpeed.mph) | json_encode %}
{% set windGusts = hours | map(h => h.windGust.mph) | json_encode %}
{% set windDirections = hours | map(h => h.windDirection) | json_encode %}

<div class="wx-chart-wrapper margin-top-3 margin-bottom-4">
  <span class="font-family-mono text-primary-dark">
    {{ "Temperature" | t }}
  </span>
  <div class="position-sticky left-0 display-flex flex-justify padding-top-2 padding-bottom-105">
    {% include "@new_weather_theme/partials/scroll-buttons.html.twig" %}
  </div>
  <div class="wx-chart wx-hourly-temp-chart-container margin-bottom-105 position-relative grid-col-12 width-full overflow-x-auto" data-times="{{ times }}" data-temps="{{ temps }}" data-feels-like="{{ feelsLike }}" data-sync-scrolling="true">
    <div class="maxh-card-lg" style="width: max(100%, calc(var(--chart-datapoint-width) * {{times | split(',') | length}}))">
      <canvas>
      </canvas>
    </div>
  </div>
  <div class="display-flex flex-align-center font-mono-xs text-base">
    <div class="width-3 border-bottom-2px border-primary-dark height-0 margin-right-1">
      <div class="bg-primary-dark margin-left-1 radius-pill width-1 height-1" style="margin-top: -3px;"></div>
    </div>
    {{ "Temperature" | t }}
    <div class="margin-left-3 width-3 border-bottom-2px border-top-0 border-left-0 border-right-0 border-dotted border-primary-light height-0 margin-right-1">
      <div class="bg-primary-light margin-left-1 radius-pill width-1 height-1" style="margin-top: -3px;"></div>
    </div>
    {{  "Feels like" | t }}
  </div>
</div>

<div class="wx-chart-wrapper margin-bottom-2">
  <span class="font-family-mono text-primary-dark">{{"Chance of precipitation" | t }}</span>
  <div class="position-sticky left-0 display-flex flex-justify padding-top-2 padding-bottom-105">
    {% include "@new_weather_theme/partials/scroll-buttons.html.twig" %}
  </div>
  <div class="wx-chart wx-hourly-pops-chart-container position-relative grid-col-12 width-full overflow-x-auto" data-times="{{ times }}" data-pops="{{ pops }}" data-sync-scrolling="true">
    <div class="maxh-card-lg" style="width: max(100%, calc(var(--chart-datapoint-width) * {{times | split(',') | length}}))">
      <canvas>
      </canvas>
    </div>
  </div>
</div>

<div class="wx-chart-wrapper margin-bottom-4">
  <span class="font-family-mono text-primary-dark">{{ "Wind" | t }}</span>
  <div class="position-sticky left-0 display-flex flex-justify padding-top-2 padding-bottom-105">
    {% include "@new_weather_theme/partials/scroll-buttons.html.twig" %}
  </div>
  <div class="wx-chart wx-hourly-wind-chart-container margin-bottom-105 position-relative grid-col-12 width-full overflow-x-auto" data-times="{{ times }}" data-wind-speeds="{{ windSpeeds }}" data-wind-gusts="{{ windGusts }}" data-wind-directions="{{ windDirections }}" data-sync-scrolling="true">
    <div class="maxh-card-lg" style="width: max(100%, calc(var(--chart-datapoint-width) * {{times | split(',') | length}}))">
      <canvas></canvas>
    </div>
  </div>
  <div class="display-flex flex-align-center font-mono-xs text-base">
    <div class="width-3 border-bottom-2px border-secondary-darker height-0 margin-right-1">
      <div class="bg-primary-dark margin-left-1 radius-pill width-1 height-1" style="margin-top: -3px;"></div>
    </div>
    {{ "Wind speed" | t }}
    <div class="margin-left-3 width-3 border-bottom-2px border-top-0 border-left-0 border-right-0 border-dotted border-secondary height-0 margin-right-1">
      <div class="bg-secondary margin-left-1 radius-pill width-1 height-1" style="margin-top: -3px;"></div>
    </div>
    {{  "Gusts" | t }}
  </div>
</div>

<div class="wx-chart-wrapper margin-bottom-2">
  <span class="font-family-mono text-primary-dark"> {{"Humidity" | t }} </span>
  <div class="position-sticky left-0 display-flex flex-justify padding-top-2 padding-bottom-105">
    {% include "@new_weather_theme/partials/scroll-buttons.html.twig" %}
  </div>
  <div class="wx-chart wx-hourly-humidity-chart-container position-relative grid-col-12 width-full overflow-x-auto" data-times="{{ times }}" data-humidity="{{ relativeHumidity }}" data-sync-scrolling="true">
    <div class="maxh-card-lg" style="width: max(100%, calc(var(--chart-datapoint-width) * {{times | split(',') | length}}))">
      <canvas>
      </canvas>
    </div>
  </div>
</div>

<div class="wx-chart-wrapper margin-bottom-0">
  <span class="font-family-mono text-primary-dark">{{"Dewpoint" | t }}</span>
  <div class="position-sticky left-0 display-flex flex-justify padding-top-2 padding-bottom-105">
    {% include "@new_weather_theme/partials/scroll-buttons.html.twig" %}
  </div>
  <div class="wx-chart wx-hourly-dewpoint-chart-container position-relative grid-col-12 width-full overflow-x-auto" data-times="{{ times }}" data-dewpoints="{{ dewpoints }}" data-sync-scrolling="true">
    <div class="maxh-card-lg" style="width: max(100%, calc(var(--chart-datapoint-width) * {{times | split(',') | length}}))">
      <canvas>
      </canvas>
    </div>
  </div>
</div>
